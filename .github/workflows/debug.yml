name: Manually verify the GHA Actions (verification to SCC not expected to work)

on:
  workflow_dispatch:
    inputs:
      product-name:
        description: 'Product name to verify'
        required: true
        type: string
      version:
        description: 'Version to verify (e.g., v1.2.3 or 1.2.3-rc1)'
        required: true
        type: string
      fail-on-error:
        description: 'Fail the workflow if verification fails'
        required: false
        type: boolean
        default: false

jobs:
  verify:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5
        with:
          fetch-depth: 0

      - name: Download SCC Product Version Verifier
        uses: ./actions/download

      - name: Verify Product Version
        uses: ./actions/verify
        with:
          product-name: ${{ inputs.product-name }}
          version: ${{ inputs.version }}
          staging-code: "FAKE_STAGING_CODE"
          production-code: "FAKE_PROD_CODE"
          fail-on-error: ${{ inputs.fail-on-error }}

      - name: Verification Complete
        shell: bash
        run: |
          echo "âœ… Verification workflow completed"
          echo "Check the step summary for detailed results"